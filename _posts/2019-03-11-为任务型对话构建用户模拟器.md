---
layout: post
title:  "为任务型对话构建用户模拟器"
categories: 论文
tags:  Python 任务型对话
author: littleRound
comment: true
excerpt: 本文提出一种结合数据收集与基于规则的模拟器构建方式，模拟订电影票和电影咨询的任务，并演示了如何通过该框架来定制特定需求的模拟器。
---

* content
{:toc}

{% raw %}

# 为任务型对话构建用户模拟器

论文原文链接：[A User Simulator for Task-Completion Dialogues](https://arxiv.org/pdf/1612.05688.pdf)

## 引言

在用强化学习构建任务型对话系统时，常会碰到一些困难。

1. 强化学习**需要与环境交互**，故**传统的语料库不能直接使用**。
2. 特定任务需要**特定标注**的数据。
3. **标注**对话内容**需要**特定领域的**额外知识**。

鉴于构建特定合适的数据集**费钱费时**，一个较好的办法是：**通过已有语料库构建用户模拟器**。强化学习的对话策略可以先在模拟器上**训练到一个较合理的水平**，再部署到真实环境中**在线**训练。

本文提出一种结合**数据收集**与**基于规则**的模拟器构建方式，模拟订电影票和电影咨询的任务，并演示了如何通过该框架来定制特定需求的模拟器。

关于任务型对话系统，相关结构可参考[这篇博文](https://littleround.cn/2019/01/19/%E5%BD%93%E4%BD%A0%E6%89%93%E6%B5%B7%E5%BA%95%E6%8D%9E%E5%AE%A2%E6%9C%8D%E7%9A%84%E6%97%B6%E5%80%99-%E8%B0%88%E8%B0%88%E4%BB%BB%E5%8A%A1%E5%9E%8B%E8%AF%AD%E9%9F%B3%E5%AF%B9%E8%AF%9D/)。

## 相关工作

既然要搭建模拟器，首先要明白什么是一个好的模拟器。然而，“好”模拟器的标准**目前**学界也**尚未统一**，原则上

> 一个优秀的模拟器应该与真人的行为并无二致。

~~然而这并不可以量化什么，~~所以目前**并无**一种搭建用户模拟器的“**标准**”做法。

目前已知的用户模拟器大致可以如下分类：

- 按**颗粒度**：**对话动作**（~~如：“提问地址”~~） 或 **发言**（~~如：“请问您想去哪儿看电影呢？”~~）
- 按**方法**：**基于规则**（~~也就是用代码逻辑写死了~~） 或 **基于模型**（也就是基于数据）

早期有通过连续两个动作的二元组来推导用户下一个行为的方法（也就是通过前一个动作预测后一个动作），但这样的用户模拟~~由于过于简单粗暴~~会**产生不合逻辑**的结果。

为了使得用户模拟器的行为更有逻辑，我们引入**用户动作历史的记录**以及**用户目标的状态建模**。

另一方面，最近也有使用序列到序列方法（seq2seq）来训练用户模拟器的工作。该类用户模拟器适用于聊天机器人，但在任务型对话表现较差，理由在于其无法满足任务型对话中查数据库，汇总信息等高度严密性~~为基于规则量身打造~~的工作。此外，该类用户模拟器虽然**不需要特定的特征工程**，但**需要大量的标注数据**~~，反正都得干~~。

还有一种基于议程机制（agenda-based）的用户模拟器就**清晰方便特别合适**任务型对话。通过槽-值配对（slot-value pair）表格**确定用户目标与限制**；通过类似栈的结构记录用户行动来**追踪对话状态**以保证模拟的逻辑性。

本文用的就是~~这个特别合适的~~用户模拟器构建方式，通过议程机制解决**对话动作**的生成，通过**序列到序列的自然语言生成（NLG）组件**来将**对话动作**转换为**自然语言**。

## 本文使用的任务型对话系统

使用了Amazon Mechanical Turk的数据集以及自己设计的概要（schema）标了280轮对话（平均11轮）。

## 用户模拟器

关于Agenda-based可以参考[这里的论文](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.158.3318&rep=rep1&type=pdf)，其实**大量的实现细节**均取自该篇（值得一提的是，这篇论文描述的也是[Pydial](https://littleround.cn/2019/01/25/Pydial%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%E7%AE%80%E4%BB%8B/)使用的用户模拟器）。

![Agenda-based](/static/post_resource/2019-03-11-1.PNG)

### 用户目标

![Goal](/static/post_resource/2019-03-11-2.PNG)

### 用户动作

![Action](/static/post_resource/2019-03-11-3.PNG)

### NLU与NLG

由于本文并未引入超出常规的方法（NLG中模板与模型结合算是一个改动），这两部分感兴趣的同学请自行观看。

## 结语

~~和引言差不多，略过一部分。~~项目其实有Github开源，实际看过感觉还是看代码比较有效率。

项目地址：[TC-Bot](https://github.com/MiuLab/TC-Bot)

大家也去动手搭建自己的用户模拟器吧！~~话说谁会没事搭建这个...~~

{% endraw %}